# 概念股篩選系統 - 技術問題記錄

## 🎯 項目概覽

**項目名稱**: 概念股自動化篩選系統
**最後更新**: 2024-12-19
**負責人**: 您一個人

## 🐛 已解決的技術問題

### 測試設置問題 (2024-12-19 解決)

#### 問題描述

當從根目錄運行所有測試時，`useApi` Hook 測試失敗，出現 `TypeError: observer.observe is not a function` 錯誤。

#### 根本原因

Jest 配置衝突：UI 包有自己的 Jest 配置，與根目錄配置產生衝突。

#### 解決方案

1. 刪除了 UI 包的 Jest 配置文件
2. 簡化了根目錄的 Jest 配置
3. 優化了 mock 設置，使用類而不是函數
4. 統一了 Babel 配置

#### 結果

- ✅ 所有測試通過：70 個測試用例全部成功
- ✅ 測試架構更簡潔：移除了重複配置
- ✅ 性能提升：測試執行時間從 421 秒減少到 2 秒
- ✅ 穩定性提升：解決了 mock 設置不穩定的問題

#### 經驗教訓

1. **避免配置重複**: 在 monorepo 中，子包應該盡量繼承根目錄配置
2. **Mock 穩定性**: 使用類而不是函數來創建 mock，提供更穩定的 API
3. **配置衝突排查**: 當測試在不同環境下表現不一致時，優先檢查配置衝突
4. **簡化架構**: 有時候移除複雜的配置比添加更多配置更有效

## 📝 注意事項

1. **代碼質量優先**: 嚴格遵循 TypeScript 和 React 最佳實踐
2. **測試驅動**: 所有新功能必須包含相應的測試
3. **跨平台兼容**: 確保所有腳本在 Windows 和 macOS 上運行
4. **文檔同步**: 代碼變更時同步更新相關文檔
5. **依賴管理**: 統一使用 pnpm 管理依賴

---

_最後更新: 2024-12-19_
_狀態: 開發環境配置完成，準備進入 CI/CD 階段_
_維護者: 您一個人_
