"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StockDetailPanel = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const HeatBar_1 = require("./HeatBar");
const LoadingSkeleton_1 = require("./LoadingSkeleton");
const ErrorState_1 = require("./ErrorState");
const EmptyState_1 = require("./EmptyState");
// 簡化的 StockAttribution 組件（避免依賴問題）
const StockAttribution = ({ stockId, stockName, currentTheme }) => {
    return ((0, jsx_runtime_1.jsxs)("div", { className: "bg-gray-50 rounded-lg p-4", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-medium text-gray-700 mb-2", children: "\u500B\u80A1\u6B78\u56E0\u5206\u6790" }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2 text-sm", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-gray-600", children: "\u80A1\u7968\u4EE3\u865F" }), (0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: stockId })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-gray-600", children: "\u80A1\u7968\u540D\u7A31" }), (0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: stockName })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-gray-600", children: "\u7576\u524D\u6982\u5FF5" }), (0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: currentTheme })] })] })] }));
};
const StockDetailPanel = ({ selectedStock, analysis, loading = false, error, onRetry, className = '', useRealData = false, showStockAttribution = false }) => {
    if (loading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: `w-96 bg-white border-l border-gray-200 ${className}`, children: (0, jsx_runtime_1.jsxs)("div", { className: "p-6", children: [(0, jsx_runtime_1.jsx)(LoadingSkeleton_1.LoadingSkeleton, { type: "card", className: "mb-6" }), (0, jsx_runtime_1.jsx)(LoadingSkeleton_1.LoadingSkeleton, { type: "text" })] }) }));
    }
    if (error) {
        return ((0, jsx_runtime_1.jsx)("div", { className: `w-96 bg-white border-l border-gray-200 ${className}`, children: (0, jsx_runtime_1.jsx)(ErrorState_1.ErrorState, { message: error, onRetry: onRetry, className: "h-full" }) }));
    }
    if (!selectedStock && !analysis) {
        return ((0, jsx_runtime_1.jsx)("div", { className: `w-96 bg-white border-l border-gray-200 ${className}`, children: (0, jsx_runtime_1.jsx)(EmptyState_1.EmptyState, { title: "\u9078\u64C7\u4E00\u652F\u80A1\u7968", message: "\u5F9E\u5217\u8868\u4E2D\u9078\u64C7\u4E00\u652F\u80A1\u7968\u4F86\u67E5\u770B\u8A73\u7D30\u5206\u6790", icon: (0, jsx_runtime_1.jsx)("svg", { className: "w-12 h-12 text-gray-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" }) }), className: "h-full" }) }));
    }
    // 決定顯示的股票資訊
    const stockInfo = selectedStock || analysis?.stock;
    const stockTicker = stockInfo?.ticker || '';
    const stockName = stockInfo?.name || '';
    return ((0, jsx_runtime_1.jsx)("div", { className: `w-96 bg-white border-l border-gray-200 overflow-y-auto ${className}`, children: (0, jsx_runtime_1.jsxs)("div", { className: "p-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-start justify-between mb-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-xl font-bold text-gray-900", children: stockTicker }), stockName && ((0, jsx_runtime_1.jsx)("p", { className: "text-gray-600 mt-1", children: stockName }))] }), (0, jsx_runtime_1.jsx)(HeatBar_1.HeatBar, { score: selectedStock?.heatScore || analysis?.themes?.[0]?.relevanceScore || 75, size: "md", showScore: true })] }), (selectedStock?.concepts || analysis?.themes) && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-sm font-medium text-gray-700 mb-2", children: "\u76F8\u95DC\u6982\u5FF5" }), (0, jsx_runtime_1.jsx)("div", { className: "flex flex-wrap gap-2", children: selectedStock?.concepts?.map((concept, index) => ((0, jsx_runtime_1.jsx)("span", { className: "inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800", children: concept }, index))) || analysis?.themes?.map((theme, index) => ((0, jsx_runtime_1.jsx)("span", { className: "inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800", children: theme.theme }, index))) })] }))] }), showStockAttribution && ((0, jsx_runtime_1.jsx)("div", { className: "mb-6", children: (0, jsx_runtime_1.jsx)(StockAttribution, { stockId: stockTicker, stockName: stockName, currentTheme: analysis?.themes?.[0]?.theme || '' }) })), analysis && ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-lg font-semibold text-gray-900", children: "AI \u5206\u6790" }), analysis.themes && analysis.themes.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-medium text-gray-700 mb-2", children: "\u76F8\u95DC\u6982\u5FF5\u5206\u6790" }), (0, jsx_runtime_1.jsx)("div", { className: "space-y-2", children: analysis.themes.map((theme, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "bg-gray-50 rounded-lg p-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between mb-1", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-medium text-gray-900", children: theme.name }), (0, jsx_runtime_1.jsx)(HeatBar_1.HeatBar, { score: theme.relevanceScore, size: "sm", showScore: false })] }), theme.description && ((0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-600", children: theme.description }))] }, index))) })] })), analysis.summary && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-medium text-gray-700 mb-2", children: "\u6295\u8CC7\u5EFA\u8B70" }), (0, jsx_runtime_1.jsx)("div", { className: "bg-gray-50 rounded-lg p-3", children: (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-700 leading-relaxed", children: analysis.summary }) })] }))] })), useRealData && ((0, jsx_runtime_1.jsx)("div", { className: "mt-6 p-3 bg-green-50 border border-green-200 rounded-lg", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center text-sm text-green-700", children: [(0, jsx_runtime_1.jsx)("svg", { className: "w-4 h-4 mr-1", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" }) }), "\u4F7F\u7528\u771F\u5BE6\u53F0\u80A1\u8CC7\u6599"] }) }))] }) }));
};
exports.StockDetailPanel = StockDetailPanel;
