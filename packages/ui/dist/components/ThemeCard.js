"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ThemeCard = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const index_1 = require("../index");
const ThemeCard = ({ theme, onSelect, onClick, onSelectStock, className = '', compact = false, showAnomaly = false, showSentiment = false, onToggleFavorite, isFavorite }) => {
    const handleCardClick = () => {
        onSelect?.(theme);
        if (onClick) {
            onClick(theme);
        }
    };
    const handleStockClick = (e, stock) => {
        e.stopPropagation();
        onSelectStock?.(stock);
    };
    const getHeatColor = (score) => {
        if (score >= 80)
            return 'from-red-500 to-orange-500';
        if (score >= 60)
            return 'from-orange-500 to-yellow-500';
        if (score >= 40)
            return 'from-yellow-500 to-green-500';
        return 'from-green-500 to-blue-500';
    };
    const getHeatText = (score) => {
        if (score >= 80)
            return '極熱';
        if (score >= 60)
            return '熱門';
        if (score >= 40)
            return '溫和';
        return '冷門';
    };
    return ((0, jsx_runtime_1.jsx)("div", { className: `card card-interactive group ${className}`, onClick: handleCardClick, role: "button", tabIndex: 0, "aria-label": `主題：${theme.theme}，熱度：${theme.heatScore}`, onKeyDown: (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                handleCardClick();
            }
        }, children: (0, jsx_runtime_1.jsxs)("div", { className: "p-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-start justify-between gap-4 mb-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex-1", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between mb-2", children: [(0, jsx_runtime_1.jsx)("h3", { className: "font-bold text-gray-900 text-xl leading-tight group-hover:text-blue-600 transition-colors", children: theme.theme }), onToggleFavorite && isFavorite && ((0, jsx_runtime_1.jsx)("button", { onClick: (e) => {
                                                e.stopPropagation();
                                                onToggleFavorite(theme.id, theme.theme);
                                            }, className: "p-2 rounded-lg hover:bg-gray-100 transition-colors", "aria-label": isFavorite(theme.id) ? '取消收藏' : '加入收藏', children: (0, jsx_runtime_1.jsx)("svg", { className: `w-5 h-5 ${isFavorite(theme.id) ? 'text-yellow-500 fill-current' : 'text-gray-400 hover:text-yellow-500'}`, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" }) }) }))] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: `inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r ${getHeatColor(theme.heatScore)} text-white`, children: [(0, jsx_runtime_1.jsx)("div", { className: "w-2 h-2 bg-white rounded-full mr-2 opacity-80" }), getHeatText(theme.heatScore)] }), (0, jsx_runtime_1.jsxs)("span", { className: "text-sm text-gray-500", children: ["\u71B1\u5EA6 ", theme.heatScore] })] })] }), (0, jsx_runtime_1.jsx)("div", { className: "flex-shrink-0", children: (0, jsx_runtime_1.jsx)(index_1.HeatBar, { score: theme.heatScore, size: "medium" }) })] }), theme.description && !compact && ((0, jsx_runtime_1.jsx)("p", { className: "text-gray-600 text-sm mb-4 line-clamp-2 leading-relaxed", children: theme.description })), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 gap-4 mb-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-center p-3 bg-gray-50 rounded-lg", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-gray-900", children: theme.stocks.length }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-500", children: "\u76F8\u95DC\u80A1\u7968" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center p-3 bg-gray-50 rounded-lg", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-gray-900", children: theme.stocks.reduce((sum, stock) => sum + (stock.heatScore || 0), 0).toFixed(0) }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-500", children: "\u7E3D\u71B1\u5EA6" })] })] }), theme.stocks.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-semibold text-gray-700", children: "\u76F8\u95DC\u80A1\u7968" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-xs text-gray-500", children: [theme.stocks.length, " \u6A94"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 gap-2", children: [theme.stocks.slice(0, compact ? 2 : 4).map((stock) => ((0, jsx_runtime_1.jsxs)("button", { onClick: (e) => handleStockClick(e, stock), className: "flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 group/stock", "aria-label": `查看 ${stock.name} (${stock.ticker}) 詳情`, children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-3", children: [(0, jsx_runtime_1.jsx)("div", { className: "w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-white text-xs font-bold", children: stock.ticker.slice(0, 2) }), (0, jsx_runtime_1.jsxs)("div", { className: "text-left", children: [(0, jsx_runtime_1.jsx)("div", { className: "font-medium text-gray-900 text-sm", children: stock.ticker }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-500", children: stock.name })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-right", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-sm font-medium text-gray-900", children: ["\u71B1\u5EA6 ", stock.heatScore || 0] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-500", children: (stock.heatScore || 0) >= 70 ? '🔥' : (stock.heatScore || 0) >= 50 ? '⚡' : '📈' })] }), (0, jsx_runtime_1.jsx)("svg", { className: "w-4 h-4 text-gray-400 group-hover/stock:text-blue-500 transition-colors", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 5l7 7-7 7" }) })] })] }, stock.ticker))), theme.stocks.length > (compact ? 2 : 4) && ((0, jsx_runtime_1.jsx)("div", { className: "text-center py-2", children: (0, jsx_runtime_1.jsxs)("span", { className: "text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full", children: ["\u9084\u6709 ", theme.stocks.length - (compact ? 2 : 4), " \u6A94\u80A1\u7968"] }) }))] })] })), (0, jsx_runtime_1.jsx)("div", { className: "mt-4 pt-4 border-t border-gray-100", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("button", { onClick: handleCardClick, className: "flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors", children: [(0, jsx_runtime_1.jsxs)("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: [(0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15 12a3 3 0 11-6 0 3 3 0 016 0z" }), (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" })] }), "\u67E5\u770B\u8A73\u60C5"] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)("button", { className: "p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors", "aria-label": "\u6536\u85CF\u4E3B\u984C", children: (0, jsx_runtime_1.jsx)("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" }) }) }), (0, jsx_runtime_1.jsx)("button", { className: "p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors", "aria-label": "\u5206\u4EAB\u4E3B\u984C", children: (0, jsx_runtime_1.jsx)("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" }) }) })] })] }) })] }) }));
};
exports.ThemeCard = ThemeCard;
